# AutoCodeDataPipeline
Data Generation and Processing for Local Code Repositories

## Quickstart

1)准备代码仓
- 将macrozheng/mall克隆到本项目路径: repo/mall

2)安装依赖
pip install -r requirements.txt
pip install pyyaml

3)运行全流程
python scripts/01_index_repo.py
python scripts/02_build_domain_map.py
python scripts/03_extract_rules_and_flows.py
python scripts/04_generate_qa.py
python scripts/05_generate_design_tasks.py
python scripts/06_postprocess_and_validate.py
python scripts/07_metrics_report.py

4)查看结果
- QA样本:data/samples/qa_samples.jsonl
- Design样本:data/samples/design_samples.jsonl
- 统计报告:docs/05_demo_and_results.md


8&9&10#####
训练目标不是追求高性能，而是sanitycheck数据集可用于Qwen2.5指令微调

训练数据来自自动生成的grounded QA样本

trace与evidence用于数据审计与后续扩展(例如RAG/带证据回答)，训练时先不强制拼进prompt

## Step01
pip install pyyaml
python scripts/01_index_repo.py








##### some info recording
选mall+订单库存的原因
• mall是电商业务，订单库存是典型强业务规则域
• 适合提取：状态机、扣减库存、下单幂等、支付回调、超卖处理、事务边界、失败补偿
• 训练目标：让Qwen2.5微调后能回答“业务流程/规则”和“基于现有架构给方案”

AutoCodeDataPipeline/configs/scope.yaml用于定义AutoCodeDataPipeline的代码抽取作用域，通过路径白名单、语言过滤、领域关键词与chunk切分规则，从大型商城项目中精准构建“订单/库存”子域代码语料索引，服务于代码理解、检索与大模型应用。




AutoCodeDataPipeline的目标：从本地代码仓自动抽取业务流程与规则，生成可追溯(grounded)的训练样本，支持Qwen2.5微调。

两类样本：
1)场景1：业务问答(QA)+原文代码段+可审计trace
2)场景2：需求→基于现有架构的设计方案+解释+trace+证据