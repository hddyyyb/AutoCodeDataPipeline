#repo路径+只做订单/库存+include/exclude路径规则

project_name: AutoCodeDataPipeline

repo:
  repo_path: repo/mall
  default_branch: master

scope:  # 作用域控制
  domains:  # 业务域限制
    - order
    - stock
  languages: # 语言白名单
    - java
    - xml
    - yaml
    - yml
    - md
    - properties

  # mall-admin：后台管理系统
  # mall-portal：前台接口
  # mall-common：公共组件
  # mall-mbg：MyBatis Generator生成的代码
  include_paths:  # 显式纳入的目录,在这些目录里找文件
    - mall-admin/src/main/java
    - mall-portal/src/main/java
    - mall-common/src/main/java
    - mall-mbg/src/main/java
    - mall-mbg/src/main/resources
    - mall-admin/src/main/resources
    - mall-portal/src/main/resources

  exclude_paths:  # 全局强制排除规则，排除构建产物，排除IDE配置，排除测试代码，排除自动生成内容
    - "**/target/**"
    - "**/node_modules/**"
    - "**/.git/**"
    - "**/test/**"
    - "**/tests/**"
    - "**/generated/**"
    - "**/dist/**"
    - "**/build/**"
    - "**/.idea/**"
    - "**/.vscode/**"
    - "**/logs/**"

  keyword_filters:  # 即使文件在include_paths里，也要满足“文件名 / 类名 / 包名 / 内容” 命中对应domain的关键词
    order:
      - order
      - oms
      - cart
      - pay
      - payment
      - refund
      - cancel
      - receiver
      - shipment
      - delivery
    stock:
      - stock
      - sku
      - inventory
      - lock
      - deduct
      - release
      - ware
      - product

chunking:  # 代码切分规则
  java:
    max_lines_per_chunk: 180
    min_lines_per_chunk: 20
  text:
    max_lines_per_chunk: 220
    min_lines_per_chunk: 30

output:
  raw_index_dir: data/raw_index   # 全量代码索引（RAG/训练）
  index_file: data/raw_index/repo_index.jsonl   # 抽样预览
  sample_index_file: data/samples/repo_index_sample.jsonl  # 原始chunk集合
  max_sample_lines: 120
