# AutoCodeDataPipeline

AutoCodeDataPipeline is an automated system for generating high-quality,
repository-grounded training data from a local codebase.

The system is designed to support fine-tuning of Qwen2.5-series models,
enabling them to:
- Answer questions about business rules and workflows implemented in code
- Produce architecture-aware design proposals grounded in an existing repository

This project directly addresses the interview task:
“Intelligent Training Data Generation and Processing from a Local Code Repository”.

---

## Supported Scenarios

### Scenario 1: Repository-Grounded QA

Automatically generate question–answer pairs based on:
- Business rules and workflows extracted from the codebase
- Original source code snippets as evidence
- Structured, auditable reasoning traces

### Scenario 2: Repository-Constrained Design Generation

Given a requirement, generate a design proposal that:
- Respects the existing repository architecture
- Reuses or extends existing components where possible
- Provides evidence code snippets and a reasoning trace

---

## Repository Used

Public GitHub repository:
https://github.com/macrozheng/mall

Focused subdomains:
- Order management
- Stock / inventory management

---

## End-to-End Pipeline

1. Repository indexing and chunking
2. Domain map construction (architecture, entities, operations, flows)
3. Business rule and flow extraction
4. QA and design sample generation
5. Validation and governance
6. SFT-ready dataset preparation
7. (Optional) LoRA fine-tuning and strict inference validation

---

## Key Design Principles

- Full traceability to original source code
- Auditable reasoning traces (non-chain-of-thought)
- Training–inference alignment through shared constraints
- Extensible and repository-agnostic architecture

---

## Quick Start

```bash
python scripts/01_index_repo.py
python scripts/02_build_domain_map.py
python scripts/03_extract_rules_and_flows.py
python scripts/04_generate_qa.py
python scripts/05_generate_design_tasks.py
python scripts/06_postprocess_and_validate.py
python scripts/08_prepare_sft_data.py
```
(Optional)
```bash
python scripts/09_lora_finetune.py
python scripts/10_infer_lora.py
```